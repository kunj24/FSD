<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Portal - Login</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <i class="fas fa-book-open"></i>
                <h1>University Library Portal</h1>
                <p>Login to access your library account</p>
            </div>
        </header>

        <nav class="navigation">
            <a href="/" class="nav-link">
                <i class="fas fa-home"></i>
                Home
            </a>
            <a href="/login" class="nav-link active">
                <i class="fas fa-sign-in-alt"></i>
                Login
            </a>
            <a href="/about" class="nav-link">
                <i class="fas fa-info-circle"></i>
                About
            </a>
        </nav>

        <!-- Flash Messages -->
        <% if (success_msg && success_msg.length > 0) { %>
            <div class="alert alert-success">
                <i class="fas fa-check-circle"></i>
                <span><%= success_msg %></span>
            </div>
        <% } %>

        <% if (error_msg && error_msg.length > 0) { %>
            <div class="alert alert-error">
                <i class="fas fa-exclamation-triangle"></i>
                <span><%= error_msg %></span>
            </div>
        <% } %>

        <main class="main-content">
            <div class="login-section">
                <div class="login-card">
                    <div class="login-header">
                        <i class="fas fa-user-graduate"></i>
                        <h2>Library Account Login</h2>
                        <p class="login-subtitle">Enter your credentials to access the library portal</p>
                    </div>

                    <form action="/login" method="POST" class="login-form">
                        <div class="form-group">
                            <label for="username">
                                <i class="fas fa-user"></i>
                                Username
                            </label>
                            <input 
                                type="text" 
                                id="username" 
                                name="username" 
                                required 
                                placeholder="Enter your username"
                                autocomplete="username"
                            >
                        </div>

                        <div class="form-group">
                            <label for="password">
                                <i class="fas fa-lock"></i>
                                Password
                            </label>
                            <div class="password-input">
                                <input 
                                    type="password" 
                                    id="password" 
                                    name="password" 
                                    required 
                                    placeholder="Enter your password"
                                    autocomplete="current-password"
                                >
                                <button type="button" class="password-toggle" onclick="togglePassword()">
                                    <i class="fas fa-eye" id="password-icon"></i>
                                </button>
                            </div>
                        </div>

                        <button type="submit" class="login-btn">
                            <i class="fas fa-sign-in-alt"></i>
                            Login to Portal
                        </button>
                    </form>

                    <div class="login-info">
                        <div class="session-info">
                            <h4><i class="fas fa-info-circle"></i> Session Information</h4>
                            <ul>
                                <li>Sessions are secure and encrypted</li>
                                <li>Automatic logout after 24 hours of inactivity</li>
                                <li>Your session data includes login time and user info</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="demo-section">
                    <h3>Demo Accounts</h3>
                    <p>Use these accounts to test the library portal:</p>
                    
                    <div class="demo-accounts-grid">
                        <div class="demo-account-card" onclick="fillCredentials('librarian', 'password123')">
                            <div class="demo-role">
                                <i class="fas fa-user-tie"></i>
                                <strong>Librarian</strong>
                            </div>
                            <div class="demo-credentials">
                                <span>Username: librarian</span>
                                <span>Password: password123</span>
                            </div>
                            <small>Click to auto-fill</small>
                        </div>

                        <div class="demo-account-card" onclick="fillCredentials('student1', 'password123')">
                            <div class="demo-role">
                                <i class="fas fa-user-graduate"></i>
                                <strong>Student</strong>
                            </div>
                            <div class="demo-credentials">
                                <span>Username: student1</span>
                                <span>Password: password123</span>
                            </div>
                            <small>Click to auto-fill</small>
                        </div>

                        <div class="demo-account-card" onclick="fillCredentials('faculty1', 'password123')">
                            <div class="demo-role">
                                <i class="fas fa-chalkboard-teacher"></i>
                                <strong>Faculty</strong>
                            </div>
                            <div class="demo-credentials">
                                <span>Username: faculty1</span>
                                <span>Password: password123</span>
                            </div>
                            <small>Click to auto-fill</small>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2024 University Library Portal. Secure login system.</p>
        </footer>
    </div>

    <script>
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const passwordIcon = document.getElementById('password-icon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordIcon.className = 'fas fa-eye-slash';
            } else {
                passwordInput.type = 'password';
                passwordIcon.className = 'fas fa-eye';
            }
        }

        function fillCredentials(username, password) {
            document.getElementById('username').value = username;
            document.getElementById('password').value = password;
            
            // Add visual feedback
            const cards = document.querySelectorAll('.demo-account-card');
            cards.forEach(card => card.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
        }

        // Auto-hide flash messages
        setTimeout(() => {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 300);
            });
        }, 5000);

        // Form validation
        document.querySelector('.login-form').addEventListener('submit', function(e) {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                e.preventDefault();
                alert('Please fill in all fields');
            }
        });
    </script>
</body>
</html>